import{r as d}from"./index.ed373d49.js";/* empty css                       */var _={exports:{}},f={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T=d,v=Symbol.for("react.element"),L=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,C=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N={key:!0,ref:!0,__self:!0,__source:!0};function k(t,n,s){var e,o={},c=null,a=null;s!==void 0&&(c=""+s),n.key!==void 0&&(c=""+n.key),n.ref!==void 0&&(a=n.ref);for(e in n)g.call(n,e)&&!N.hasOwnProperty(e)&&(o[e]=n[e]);if(t&&t.defaultProps)for(e in n=t.defaultProps,n)o[e]===void 0&&(o[e]=n[e]);return{$$typeof:v,type:t,key:c,ref:a,props:o,_owner:C.current}}f.Fragment=L;f.jsx=k;f.jsxs=k;_.exports=f;var r=_.exports;const x="https://dummyjson.com/",S="?limit=10&skip=0";function j(t){return t.ok?t.json():Promise.reject(`Ошибка: ${t.status} ${t.statusText}`)}function b(){return fetch(`${x}todos${S}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>j(t))}function O(t,n,s){return fetch(`${x}todos/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({todo:t,completed:n,userId:s})}).then(e=>j(e))}function E(t){const{userId:n,id:s,todo:e,completed:o}=t.item,{num:c,list:a,setList:p}=t;function i(l){const u=a.slice();u.map((y,m,h)=>m===l-1?h[m].completed=!h[m].completed:y),p(u)}return r.jsxs("div",{className:"container__item",children:[r.jsx("input",{type:"checkbox",checked:o,onChange:()=>i(c)})," ",r.jsxs("p",{className:"container__name",children:[c,". ",e]})]})}function R(t){const{list:n,setList:s}=t,[e,o]=d.useState(""),c=1;function a(i){const l=i.target.value;o(l)}function p(i){i.preventDefault(),O(e,!1,c).then(l=>{const u=n.slice();u.push(l),s(u)}).catch(l=>{console.log(l)})}return r.jsxs("form",{className:"container__input-addtask",children:[r.jsx("input",{type:"text",value:e,onChange:i=>a(i)}),r.jsx("button",{className:"container__button-addtask",onClick:i=>p(i),children:"Добавить задачу"})]})}function I(t){const{list:n,setList:s}=t;function e(o){o.preventDefault();const c=n.filter(a=>!a.completed);s(c)}return r.jsx("form",{className:"container__input-deletetasks",children:r.jsx("button",{className:"container__button-deletetasks",onClick:o=>e(o),children:"Удалить завершенные задачи"})})}function D(){const[t,n]=d.useState([]);return d.useEffect(()=>{const s=JSON.parse(localStorage.getItem("todoList"));s?n(s):b().then(e=>{n(e.todos)}).catch(e=>{console.log(e)})},[]),d.useEffect(()=>{localStorage.setItem("todoList",JSON.stringify(t))},[t]),r.jsxs("div",{className:"container__list",children:[r.jsx(I,{list:t,setList:n}),r.jsx(R,{list:t,setList:n}),t?t.map((s,e)=>r.jsx(E,{num:e+1,item:s,list:t,setList:n},`pl${e}`)):""]})}export{D as default};
